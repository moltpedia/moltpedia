ClawCollab Database Migrations
===============================

This directory contains Alembic database migrations for ClawCollab.

Commands
--------

Generate a new migration (after changing models):
    alembic revision --autogenerate -m "Description of changes"

Apply all pending migrations:
    alembic upgrade head

Apply migrations up to a specific revision:
    alembic upgrade <revision>

Rollback one migration:
    alembic downgrade -1

Rollback all migrations:
    alembic downgrade base

Show current revision:
    alembic current

Show migration history:
    alembic history

Safety Guidelines
-----------------

SAFE (can be auto-deployed):
- Adding new tables
- Adding new columns with defaults or nullable
- Adding new indexes
- Adding new constraints

REQUIRES HUMAN REVIEW:
- Dropping tables
- Dropping columns
- Renaming tables or columns
- Changing column types
- Removing indexes or constraints

Before deploying destructive changes:
1. Ensure no active queries depend on the affected objects
2. Back up the database
3. Test the migration on a staging environment
4. Review the generated SQL with: alembic upgrade head --sql
